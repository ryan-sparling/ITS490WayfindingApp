# Recorder

  Record sound from the microphone. Native and web apps.

## constructor

```javascript
new Recorder()
```

## start

```javascript
recorder.start()
```

## stop  

```javascript
recorder.stop()
```


## events

### `audioFile`

called when the recording has stopped and the audio file has been generated

#### event arguments
* `audio` : (object) that contains the value to be passed to the <source> element of an <audio> element

  should take the form:

```javascript
{
    audioData : 
}    

```

### `error`

called when something goes wrong

event arguments

* `error` : (object) error information


## Example AEK implementation

### Using Hooks

``` javascript
  import {Recorder} from "@ombiel/aek-lib";

    
  const Screen = () => {
    const [recording, setRecording] = useState(false);
    const [audio, setAudio] = useState(null);

    const recorderRef = useRef(null);
    const getRecorder = () =>{
      if (recorderRef.current === null) {
        recorderRef.current = new Recorder();
      }
      return recorderRef.current;
    };
    
    const startRecording = async () => { 
      const recorder = getRecorder();
      recorder.on("audioFile", (res) => {
        setRecording(false);
        setAudio(res.audioData);
      });
      
      recorder.on("error", (err) => {
        setRecording(false);
        console.log(err);
      });

      setAudio(null);
      await recorder.start();
      setRecording(true);
    };
  
    const stopRecording = () => {
      getRecorder().stop();
    };

    if (audio) {
      player = <audio id="audio" controls><source id="source" src={audio} /></audio>;
    }

  };
```

### Using Classes

```javascript

  import {Recorder} from "@ombiel/aek-lib";

  
  class Screen extends Component {
    constructor(props) {
      super(props);
      this.state = {
        recording: false,
        audio: null
      };
      this.startRecording = this.startRecording.bind(this);
      this.stopRecording = this.stopRecording.bind(this);
      this.recorder = new Recorder();
    }

  
    async startRecording() { 

      this.recorder.on("audioFile", (res) => {
        this.setState({
          recording: false,
          audio: res.audioData,
        });
      });
      
      this.recorder.on("error", (err) => {
        console.log(err);
      });

      await this.recorder.start();
      this.setState({
        audio: null,
        recording: true
      });
    }
    
    stopRecording() {
      this.recorder.stop();
    }

    render() {
      
      if (this.state.audio) {
        console.log(this.state.audio);
        player = <audio id="audio" controls><source id="source" src={this.state.audio} /></audio>;
      }

    }
  }

```
